course_title: Intro to SQL for Data Science
course_description: Course description here.
programming_language: r
chapters:
  - chapter_title: Selecting and summarizing columns
    chapter_description: This is a template chapter.
    exercises:
      - type: VideoExercise
        title: Introduction
        content: |-
          * Motivating example (case study preview)
          * Why not just use R/Python/etc? Memory, speed, etc.
          * Database vocabulary (in context of example)
            * Database
            * Tables
            * Columns & rows (a.k.a. records)
            * Fields (informal = cells)
          * Basic SQL syntax
            * Not case-sensitive
            * End statement with semicolon
            * Stylistic conventions (?)
          * SELECT
          * DISTINCT
      - type: MultipleChoiceExercise
        title: Why use relational databases?
        content: >-
          Q: Which of the following is NOT a good reason to use relational
          databases?

          A: They are good at handling unstructured data
      - type: NormalExercise
        title: Simple SELECT statements
        content: >-
          Single column, multiple columns, all columns (*). Order matters!
          Finish with embedded MCE asking for specific value from last query
      - type: NormalExercise
        title: Combine SELECT with DISTINCT
        content: >-
          Select all distinct values of column_name with SELECT DISTINCT. Repeat
          with multiple columns. Follow with embedded MCE to test interpretation
      - type: MultipleChoiceExercise
        title: Select the proper SELECT
        content: >-
          (Test for style and syntax)


          Q: Which of the following is the proper way to select all distinct
          values of column_name from the table_name table?

          A: 

          SELECT DISTINCT column_name

          FROM table_name;
      - type: VideoExercise
        title: Aggregate functions
        content: |-
          * Difference between COUNT(*) and COUNT(column_name)
          * Combining COUNT with DISTINCT
          * SUM
          * AVG
          * MIN
          * MAX
      - type: NormalExercise
        title: COUNT
        content: >-
          COUNT(*) counts NULLs, COUNT(column_name) excludes NULLs,
          COUNT(DISTINCT column_name)
      - type: NormalExercise
        title: SUM and AVG
        content: Find SUM and AVG of numeric column. Embedded MCE to interpret result
      - type: NormalExercise
        title: MIN and MAX
        content: MIN and MAX of numeric column. Embedded MCE to interpret result
  - chapter_title: Filtering rows
    chapter_description: Description
    exercises:
      - type: VideoExercise
        title: Filter rows with WHERE
        content: |-
          * WHERE
          * Filtering numeric vs. text values
          * Basic comparison operators: =, <>, <, <=, >, >=
          * Multiple conditions with AND, OR
      - type: NormalExercise
        title: Filter for a single condition
        content: >-
          Practice filtering for numeric and text values. Start with = and <>,
          then move to inequalities
      - type: NormalExercise
        title: Filter for multiple conditions
        content: >-
          Same as above, but incorporate AND, OR. Recall something from chapter
          1, like DISTINCT or aggregate functions? Do at least one >= AND <= for
          comparison to BETWEEN in later exercise
      - type: VideoExercise
        title: More advanced filtering
        content: |-
          * BETWEEN (compare to >= AND <= )
          * IN (compare to = AND = )
          * IS NULL, IS NOT NULL
      - type: MultipleChoiceExercise
        title: Look familiar?
        content: >-
          Give students a SELECT statement using BETWEEN and have them select an
          equivalent statement using >= AND <=
      - type: NormalExercise
        title: Stuck somewhere IN BETWEEN
        content: Practice filtering with BETWEEN and IN
      - type: NormalExercise
        title: Manage missingness
        content: >-
          Practice with IN NULL and IS NOT NULL. Combine with COUNT, DISTINCT,
          and/or other concepts from earlier
      - type: VideoExercise
        title: Search for patterns with LIKE
        content: |-
          * LIKE
          * Wildcards: %, _, [charlist], [!charlist]
      - type: NormalExercise
        title: LIKE it or NOT
        content: >-
          Practice with some simple pattern matching using LIKE with % and _.
          Then combine with NOT.
      - type: NormalExercise
        title: Pattern matching mania
        content: >-
          Practice with LIKE some more, using more advanced wildcards: sets and
          ranges of characters. Use negation (!) as well. Finish with embedded
          MCE for interpretation
      - type: VideoExercise
        title: Simple subqueries
        content: >-
          Introduce subqueries as a convenient way to filter on values that
          aren't readily available in the table of interest. These values may be
          the result of a second filtering operation on the same table, or they
          may come from a different table entirely. Use as teaser for future
          course covering joins. We will only cover very simple examples here
      - type: NormalExercise
        title: Single table subqueries
        content: >-
          Perform a couple of subqueries using information from only one table.
          Finish with embedded MCE to drill home motivation
      - type: NormalExercise
        title: Two table subqueries
        content: >-
          Perform some two table subqueries (i.e. use values from another table
          to filter this table). Finish again with an MCE to interpret the
          results
  - chapter_title: Sorting and grouping
    chapter_description: Description
    exercises:
      - type: VideoExercise
        title: Sort with ORDER BY
        content: |-
          * ORDER BY
            * Single column
            * Multiple columns
            * DESC
      - type: NormalExercise
        title: Sort by a single column
        content: 'Use ORDER BY on one column at a time, with and without DESC'
      - type: NormalExercise
        title: Sort by multiple columns
        content: >-
          Use  ORDER BY on multiple columns. Make tiebreaker analogy. Embed MCE
          to interpret single value from last result
      - type: VideoExercise
        title: Get started with GROUP BY
        content: >-
          * GROUP BY
            * Single column
            * Multiple columns
          * Combine with ORDER BY

          * Introduce column aliases via AS as a convenient shorthand. Will
          become even more useful later in chapter
      - type: MultipleChoiceExercise
        title: Everything in its right place
        content: >-
          Q: Which of the following sorts column1 in ascending order within each
          level of column2?

          A:

          SELECT column1 AS c1, column2 AS c2

          FROM table_name

          GROUP BY c1

          ORDER BY c2;
      - type: NormalExercise
        title: Sort within groups
        content: >-
          Combine GROUP BY and ORDER BY to sort within groups. Embed another MCE
          at end to interpret last result
      - type: VideoExercise
        title: Combine GROUP BY with aggregate functions
        content: >-
          * Unleash the full power of GROUP BY and aggregate functions by
          combining them to perform operations within groups

          * Examples covering grouped COUNT, SUM, AVG
      - type: NormalExercise
        title: Compute group extremes
        content: >-
          Combine GROUP BY with MIN and MAX to compute the extreme values within
          each group for a couple of variables
      - type: NormalExercise
        title: Sort by group averages
        content: 'Compute group averages, then sort by the averages'
      - type: VideoExercise
        title: Filtering with aggregate functions
        content: >-
          * WHERE keyword cannot be used to filter results from aggregate
          functions

          * Enter HAVING

          * Walk through several examples (this is not intuitive)

          * Can't use aliases in the HAVING clause since evaluated before the
          SELECT clause

          * Brief discussion of order of operations (note to self: should this
          come sooner in the course?)
      - type: NormalExercise
        title: Order of operations
        content: >-
          Check understanding of the order of operations, i.e. HAVING executes
          before SELECT, so alias is not helpful here
      - type: NormalExercise
        title: HAVING patience
        content: >-
          Compute group values, then filter for values above/below a certain
          threshold using HAVING
      - type: NormalExercise
        title: Combine HAVING with ORDER BY
        content: >-
          Same as above, plus sort results by same group values. Note you can
          refer to the column alias in the ORDER BY since it's executed last
  - chapter_title: 'Case study: New York City bike share'
    chapter_description: Description
    exercises:
      - type: VideoExercise
        title: Introduction to the data
        content: Content
      - type: MultipleChoiceExercise
        title: Title 2
        content: Content
      - type: NormalExercise
        title: Title 3
        content: Content
      - type: NormalExercise
        title: Title 4
        content: Content
      - type: VideoExercise
        title: Check-in 1
        content: Content
      - type: NormalExercise
        title: Title 5
        content: Content
      - type: NormalExercise
        title: Title 6
        content: Content
      - type: VideoExercise
        title: Check-in 2
        content: Content
      - type: NormalExercise
        title: Average trip duration by starting station
        content: >-
          Compute the average trip duration by starting station and order the
          result by station id: 


          SELECT start_station_id AS station, AVG(duration) AS seconds 

          FROM trips 

          GROUP BY station 

          ORDER BY station;
      - type: NormalExercise
        title: 'Again, but only the longest'
        content: |-
          Takes us to a station out in Bed-Stuy, Brooklyn!

          SELECT start_station_id AS station, AVG(duration) AS seconds 
          FROM trips 
          GROUP BY station 
          HAVING AVG(duration) > 2000
          ORDER BY seconds DESC;
      - type: VideoExercise
        title: Summary
        content: Content
